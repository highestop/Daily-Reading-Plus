# [企业文化与价值观](https://github.com/xufei/blog/issues/12)

- 徐飞大大挺有意思的一篇新人鸡汤，摘抄了下来怕丢

> 这个话题其实我早就想写了，刚好最近在跟一些学生接触，而且很快有个应届生徒弟要入职了，想到了当初的自己，所以觉得打算谈谈这些年的一些感悟，希望能有所帮助
>
> 我刚工作的时候，对公司非常热爱，热爱到偏激的程度，比如说觉得竞争对手公司毫无优点，比如每次看到公司的负面评价，都忍不住想出来反驳，甚至能为了这些事情跟多年的老同学争得面红耳赤
>
> 多年之后回头看这一切，会为自己当时的单纯感动，也觉得挺傻的，反思之后，会用它跟另外一件事情作比较，那就是恋爱
>
> 工作跟恋爱，真的是两件非常相似的事情，当我们开始跟一个人好，总会忽视对方的一切缺点，把优点无限放大，然后相处着相处着，好像忽然就发现对方怎么冒出这么多缺点，有时候忍不住说出来，会惹对方很不高兴，为什么呢，因为从他的角度，从未改变过，一直是这样的，为什么之前你不说，过了一阵反而不能容忍了呢？
>
> 这个是一种心理反应，体现的是预期与现实的偏差。我们一开始的时候，总是倾向于有一个完美的预期，然后逐渐发现不相符，当这些累积到超过容忍度的时候，就会爆发
>
> 我看到很多人毕业的时候都会对第一家公司充满期待，但这个期待真的有些满，一方面源自对美好未来的期望，另一方面很可能源自企业的误导。这个事情其实不能怪企业，因为就算谈恋爱，你基本上也不可能上来就跟人家说：我先跟你说下我缺点，12345，等你说完人早跑了。企业招聘的时候显然也挑好的说，比如工资没人家高，就说但是我们加班少啊，比如加班也多，就说但是能学到东西啊，总之肯定是充满优点的，涉世未深的大学生们很可能就全信了
>
> 但不巧这个新员工干了一阵，怎么感觉钱少事多离家远，每天干的还重复劳动，好像哪里不对啊？这时候问题就来了，真正的伤害，这种伤害很可怕，第一份工作跟初恋在心理上的重要度是同样的。受这一次伤，可能永远都痛
>
> 这事，我觉得负责招聘的同事有必要深思，有些缺点，如实说出来会比较好，从长远来看，隐瞒一些事实的后果很严重，不如刚开始就诚恳一些
>
> 现在我看到一些新员工跟自己之前的同学争吵，说自己公司好，对方公司是垃圾，就仿佛看到当年的我。我是过来人了，觉得这事真没必要
>
> 每个公司有自己的企业文化，所谓企业文化，是因为一些做事方式而导致的微小差异，并不是真有那么大，就好比你是射手座，书上说射手座很热爱自由，你觉得说得很对，就信了这个，好像别人就不热爱自由似的。然后你因为有这个心理暗示，就更加显得热爱自由，然后又反过来觉得星座这东西真有道理啊
>
> 对待企业文化，我觉得应这么看：
>
> - 首先，人性是最高准则，所谓人性，莫过于真善美
> - 在此基础上，可以有小的侧重点，比如华为侧重奋斗，中兴讲究奉献
>
> 如果你冷静下来看看一些公司的企业文化，会发现基本都只是细节差异，因为没有谁会说自己是邪恶的。那既然都是好话，整体来说，你都可以信，如果懒得去花时间理解它们，可以直接以真善美，还有自己内心的喜好为准
>
> 所以现在我看企业文化之类的培训，有时候会摇头笑笑，一方面是因为老油条了，你说的那些我也会，而且说不定比你说得还好，另一方面，既然我接受你，说明我要么认同你的优点，要么不介意你的缺点
>
> 我现在倾向于这么对待企业文化：
>
> 如果能接受一家公司的氛围，那就加入。如果不能接受，就离开
>
> 如果觉得值得改进，也有两个选择：等别人来推动，自己来推动
>
> 我见过很多人，不停抱怨公司的各种缺点，但是一不离职，二不想办法改进，我觉得这挺奇怪的。很多时候改进没有那么难，我打个比方，你觉得公司的某个地砖不平，不好走，不找人反馈，然后每天都要吐槽一下，其实说不定就是别人没发现，你跟他一说，他去看了发现果然这样，两分钟就给摆平了
>
> 有时候，还会有人把这样的问题上升成对这个企业的恨，好像企业是故意造出这些小问题，特意为了让员工没有好心情干活，我倾向于认为老板们不会这么蠢，有些问题他不知道而已
>
> 人生在世，想找完全合乎自己心意的伴侣或者环境基本不可能，只有两条路可以选，一是降低预期，二是帮助对方改进。这两者都是改善自己生存状况的好方式
>
> 再说说如何选择环境吧。我承认不同企业的环境确实存在差异，但这不是根本问题。企业对人的影响，远不如所在团队对人的影响大，最直接相处的人才会对自己造成最深刻的影响。就好比上学，一个人的成长过程，至少有大半取决于父母和自身，然后才轮到学校的同学和老师。所以选择工作的时候，也不一定太看重企业的大环境，如果有机会挑选到出色的上级和同事，那才是事业中最大的助力
>
> 我有时候反思自己，觉得过于爱谈正能量，俗称鸡汤。这东西也没什么不对，总比散布负能量要好些，是不是？但我现在很害怕这些话被太单纯的人看见，会让他们觉得世界特别美好，这样，碰到挫折的时候伤得格外重
>
> 这事情也有一个道理，叫做：已所欲，勿施于人。这世上当然是有一些人，或者因为理想，或者因为利益，会期望别人跟自己有相似的行为准则，但这一不小心就能变成道德绑架，我之前干过不少，很惭愧
>
> 所以我把这些都说出来，也是期望将来的新员工能独立思考，尽量不被别人的观点影响，追随自己的内心，在不伤害团队利益的情况下，完成对自己性格的完善，达成一生事业的良好起步
>
> 在我看来，人的成熟意味着两件事：
>
> - 不沉迷所喜爱的
> - 不排斥所厌恶的
>
> 也就是说，对于所见所闻，如果不是大是大非的原则问题，只需客观冷静地关注能否从中学到什么，对自己的知识或者性格有所帮助，其他的完全可以不予置评

# [飞书第一次发布会，尝试解答 B 端产品的几个难题](https://mp.weixin.qq.com/s/qbSgnXABuFa_bfvBRABC4Q)

- 基于昨天读了飞书发布会，今天再读一篇，说几个细节
- 很多东西加上时间维度的管理之后都会好用一个档次，比如将 Kanban 升级到 Roadmap
- 双链其实很多文档管理器都有了，比如 Evernote，储存是单一链路的还是靠目录，但可以通过 Tag 来实现多对多关联，这对于知识群管理是非常有用的，在你的笔记数量达到一定程度时想要索引起来就会深有体会
- 为什么说思维导图有时候比文本好使？因为它以最简单高效的方式呈现了关联性，而人看到关联就会映射出理解思路，这个比对文字重要得多
- 在「 打通 」这件事上飞书确实做得好，比如会议记录会生成邮件抄送同时可以被会话和文档引用，这一个场景其实就打通了很多东西，没有打通就要多花费很多「 工具成本 」
- 飞书说解决了「 空间 」和「 时间 」的「 错配 」，就拿会议室来说，这个确实是我们现在的痛点

# [再谈领域驱动设计](https://mp.weixin.qq.com/s/6mJGwth9i90Eu8MI6AjKxQ)

- 业务逻辑是一系列状态的转换过程，而这些过程转换又被称为领域事件。领域事件使得领域模型的状态改变，从而提供业务能力。这就是问题域
- 问题子域划分有点类似于递归，先解决小问题，但小也得成单元，是一个子域
- 领域的限界很重要，否则无法自洽或导致溢出
- 上下文表示域内一致的语言，就像讨论一个复杂的问题先要统一口径一样
- DDD 强调用领域逻辑来驱动设计和开发工作，而不是通过数据库模型
- 事件溯源就是只持久化领域事件，然后通过还原事件的方式将领域模型还原在最新的状态，这样可以将模型与数据库解耦
- 问题子域对应了微服务，微服务之间的交互基于领域事件，通过订阅总线中「 感兴趣 」的事件来驱动整个模型
- HATEOAS 的核心是领域模型通过 API 的方式向外提供能力，接口能力也是一种领域驱动的表现

# [How We Build a Design System](https://blog.bitsrc.io/how-we-build-our-design-system-15713a1f1833)

Design System driven by Components

- 设计语言保证了设计一致性，设计一致性是实现组件的基石，因为 UI-UX 的可复用单元是更细粒度的，描述起来可能要很多文字和配图
- 组件是要被共享的，所以作者的团队选择了 Bit
  - Bit 基于 Base-UI 产生了 Evangelist，我理解为「 符合基础规范的定制化产物 」，还有模板、环境、流水线等机制保证组件产出过程中各个环节的尽可能一致
  - The design system’s team role is to facilitate and regulate, not block or enforce. 很赞成这句话
  - 作者认为这是很大的成功，因为可以独立开发但共享使用，大家可以减少各自的「 构造成本 」
  - 多平台框架无关也是个趋势。但..「 We’ve even been working with the Angular team itself to provide support for Bit with Angular. After taking everything into account, we believe React is the best solution for us at this point. 」😂
- 友好的文档 —— 可索引、好触达，对于共享的组件是很重要的
- 组件之间独立的版本控制会更好控制 —— 只在必要时升级，出问题时可以单独回滚或修复
- 因为组件可以相互依赖和组合，版本依赖关系的发现也会变得很有用
  - 如一个基础组件升级后，在一个项目中的所有组件如何依赖了不同版本的这个组件，至少会有提醒。Bit 甚至有能力集成 Github，来提前「 预警 」它们
  - 这个概念作者称之为 Ripple，感觉点像依赖解析，因为 Bit 能「 掌控 」其平台上的所有组件，所以能去「 连接 」它们做强版本控制
  - 版本变更的通知有利于团队的沟通
- 一个设计系统需要明确的职责划分
  - Designers usually talk about elements on their canvas.
  - Developers talk about the React component in their IDE.
  - Users will get the code, not the design.
  - 同时也需要良好的协作方式。作者提到了 Zeplin 与 Bit 的打通
- 最后，为什么我们需要设计系统保证一致性？Helping users intuitively navigate, and successfully interact, with different parts of your applications without confusion. **This is your brand. You need a good brand.** 品牌提升影响力

# [How Facebook is bringing QUIC to billions](https://engineering.fb.com/2020/10/21/networking-traffic/how-facebook-is-bringing-quic-to-billions/)

> 翻译：https://www.infoq.cn/article/RQXyiLAFcL8KNfLckN2U 、https://mp.weixin.qq.com/s/Zjzp_rYj_XSnFZnoNf02Iw

- 介绍了一下 QUIC 和 HTTP3 的背景
  - 这里简单了解了下什么是 TCP 行头阻塞（ HOL ）https://qastack.cn/software/325881/is-it-a-good-idea-to-multiplex-blocking-streams-into-a-tcp-connection
  - QUIC 实质是将 TCP 迁移到 UDP，避免了 TCP 多路复用的尴尬，用 TSL 1.3 来实现可恢复，用 QLOG 实现可视化追踪
  - Node 15 已经尝试试验性支持 QUIC，见 https://mp.weixin.qq.com/s/8-82IaXIR6qEdHVgGBDG8A
  - 补充一篇介绍 https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit
- Facebook 决定使用 QUIC 时，先用了大量内部流量来验证可行性，还搞了个负载均衡器来监测发布
  - 开发了一套叫 MVFST 的协议实现用于部署 QUIC，且得力于之前的 Proxygen、Zero、Fizz 可以平滑迁移（ 这东西没细讲 ）
- 在对 Facebook 进行 QUIC 迁移时，尽管动态请求指标有所改善，但静态请求质量下降
  - 现象层原因是，只 enabled QUIC for dynamic GraphQL requests，导致 improving one type of request may have had detrimental side effects for others
  - 之前的 TCP 时代，先加载静态文本流然后视情况加载动态媒体流，可以通过阈值来控制，但对 QUIC 不起作用了，因为一瞬间尝试发送过多的请求，最终导致加载时间反而更长
- 尝试规模化，并在静态请求中启用 QUIC
  - 静态数据流更容易消耗 CPU，也会对 congestion control (BBR) 阻塞控制的实现有影响
  - 先建立起监控以及上面提到的负载均衡器来调节
  - 一个有效的方法是 pace UDP packets，我理解是控制 UDP 包的大小，以实现 smoother data transmission
  - 另一个方向是 generic segmentation offload (GSO)，找了篇 https://doc.dpdk.org/guides/prog_guide/generic_segmentation_offload_lib.html 和 https://lwn.net/Articles/752956/ ，大致意思是说允许发送超额的片段数据，提高传输效率
- 全员 QUIC 阶段
  - 上面提到了劣网环境 QUIC 有优势，所以在视频缓冲上验证了这个事实。提到了一个指标叫 Mean time between rebuffering (MTBR) 平均重缓存时间
  - Android 等移动设备上，会针对 TCP 行为评估下载带宽，而对 QUIC 会高估，最终反而造成卡顿
  - 另一个问题是 flow control 限流，这些之前适用于 TCP 的参数对 QUIC 不好用
- 扩展到 Ins 及其它
  - 提到了 0-RTT，见 https://blog.cloudflare.com/introducing-0-rtt/
  - 随着 Chrome https://blog.chromium.org/2020/10/chrome-is-deploying-http3-and-ietf-quic.html 和 Apple https://developer.apple.com/videos/play/wwdc2020/10111/ 的支持，以及 IETF 会在 2021 提出对于 QUIC 的 RFC，作者相信更多公司会踏上这条路，并坚信 QUIC is essential to unlocking innovative internet applications
- 总结，感觉是一篇科普性文章，提到了很多概念然后下一层去看一下是什么东西，整体上理解了 QUIC 的意图以及 Facebook 怎样一步步迁移到 QUIC 的，中间也提出了很多问题可能没有解决或者解决方案没有细说，但从作者提供的一部分数据来看 QUIC 确实是未来的一种不错的选择

# [架构师书单（ 上 ）](https://mp.weixin.qq.com/s/7ehggbjtIvEk002CUlNuBw)

- 《 代码整洁之道 》✅
- 《 重构 2.0 》✅
- 《 改善代码质量的 101 个方法 》记得有本 JS 的好像
- 《 架构师修炼之道——思维、方法与实践 》
- 《 发布！设计与部署稳定的分布式系统 2.0 》
- 《 持续交付 2.0 》✅
