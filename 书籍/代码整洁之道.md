# 《 代码整洁之道 》

## 命名

- 要严肃
- 要名副其实
  - 避免误导性
  - 不要表达多余的语义
  - 不要添加无用的语境
- 做好区分
  - 避免出现有冲突的关键字
  - 坚持使用领域关键字圈定语境
  - 避免使用单一词语
  - 确保可搜索性（ 避免出现完整搜索出现无关结果 ）
  - 但也要避免多度冗余沉杂
- 好读好记
  - 避免使用编码、短语
  - 避免使用双关语
  - 避免出现中（ 拼音 ）英文与数字混用
  - 尽可能避免使用缩写（ 除非纳入关键字表 ）
- 每个概念对应一个词
  - 建立关键字表：解决方案领域、所涉问题领域

## 函数

- 一个函数只做一件事
  - 错误处理也是一件事
- 使用描述性名称
- 尽量借助关键字命名
- 尽量少使用多元函数

## 注释

- 恰当的用途是弥补用代码表达意图时遭遇的失败
- 不应该起到美化糟糕代码的作用（ 先思考如何优化代码 ）
- 存活的时间不宜太久（ 并不能保证与代码同步 ）
- 推荐
  - 解决领域问题中的一些意图
  - 特别的警示
  - TODO 工作列表
  - FIXME 高亮不合理性
  - 公共 API 中的 doc
- 避免
  - 成员本身的解释（ 先考虑优化命名 ）
  - 代码结构或功能解释
  - 行内归属与签名
  - 位置标记与分隔符
  - 日志（ 持久化的修改信息应体现在 Commit 上 ）
- 再议
  - 范例（ 对公共 API 可能有好处 ）
  - 删除的代码（ 比如临时方案，相比起考虑到有 Git 直接删除的好处是，配合 TODO 提示我们即将会做的事 ）

## 格式

- 格式的统一是保证开发者沟通的基本条件
- 必须都遵循统一的格式
- 垂直格式
  - 关注单文件最大行数
  - 空行不是必须，而是隔离思路块
  - 避免不必要的换行（ 多数格式化工具都是单向的，不会将无意义的换行聚合 ）
  - 公共成员要易于发现，不要放在下面或内层
  - 声明位置应尽可能靠近其调用位置
  - 文件中的主旨元素应该靠上（ 读者不会一上来就沉溺到冗杂的细节中 ）
- 水平格式
  - 关注单行长度，应尽可能短小（ 死守 80 不可取，100 或 120 可以接受 ）
  - 关注默认缩进，没有偏好但必须统一（ 多数默认为 4，但有些格式化工具默认为 2 ）
  - 元素之间的空格不是必须，如高优先级运算符之间可以不空（ 但多数格式化工具会忽略这一点 ）
  - 避免无意义的缩进对齐，容易使目光失焦（ 如多行文本除外 ）
